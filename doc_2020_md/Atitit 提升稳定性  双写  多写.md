Atitit 提升稳定性  双写  多写




第二步，业务方改造程序，对 MySQL 和 TiDB 进行双写，断开 DM 同步。业务方将 TiDB 作为主库直接读写，但仍然保留了 MySQL 中的数据写入，将 MySQL 作为 TiDB 发生异常之后的降级方案。这个阶段持续了 2 个季度左右。在这期间读写 TiDB 的程序运行正常，每天的数据校验保持一致。

第二步，业务方改造程序，对 MySQL 和 TiDB 进行双写，断开 DM 同步。业务方将 TiDB 作为主库直接读写，但仍然保留了 MySQL 中的数据写入，将 MySQL 作为 TiDB 发生异常之后的降级方案。这个阶段持续了 2 个季度左右。在这期间读写 TiDB 的程序运行正常，每天的数据校验保持一致。

第三步，下线双写，仅保留直接操作 TiDB 的部分。通过第一步和第二步的验证和积累的信任，TiDB 正式作为独立的数据库投入到生产环境使用.

