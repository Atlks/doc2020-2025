Atitit java 音频接口 sound api


常见音频处理
调音 调快播放速度
混音


JavaSound API
包含在javax.sound.sampled和javax.sound.midi包中，分别用以处理数字音频simpled-audio和MIDI。SPI包含在java.sound.sampled.spi和javax.sound.midi.spi包中，提供了第三方的扩展接口

51CTO首页
|
技术频道
|
51CTO旗下网站
|
地图
|
移动端





读书
首页
网络
安全
系统
数据库
开发
web应用
考试认证
职场
管理
全部文章
窗体顶端

窗体底端
17.3.2 音频输入/输出原理
《Java高手真经. 编程基础卷：Java核心编程技术：Java基础+核心库+图形+网络+高级特性》详细讲解Java语言基础开发中的各种技术，第17章讲解各种媒体处理功能的开发和实现方法。本节说的是音频输入/输出原理。
作者：刘中兵 Java研究室来源：电子工业出版社|2009-03-24 11:37
 收藏
  分享
17.3.2  音频输入/输出原理
音频的输入和输出需要分别使用类TargetDataLine和SourceDataLine，分别代表了输入和输出的设备，它们都实现了Line接口。Line接口用来关闭/打开设备、注册事件监听器，以及提供一些用来调整声音效果的对象，例如调整音量大小的对象。AudioSystem在JavaSound体系中起着一个工厂（Factory）类的作用，提供了一系列的静态方法，我们通过这些静态方法来获取JavaSound系统默认配置的资源。它们之间的关系如图17-6所示。
在处理输入音频时，对于来自各种音频输入端口的信号，例如麦克风、CD播放器、磁带播放器等，可以在它们到达TargetDataLine之前，利用混频器控制输入混频，最后在程序中通过TargetDataLine获得数字化的音频输入流。
类似地，在处理输出音频时，混频器用来对一系列来自SourceDataLine的数据进行混频处理，经处理后的信号可输出到各种输出端口，例如扬声器、耳机等。SourceDataLine是一个可写入音频信号数字流的设备，例如，我们可以从一个WAV文件读取内容写入到SourceDataLine，然后再通过扬声器输出。

《Java高手真经. 编程基础卷：Java核心编程技术：Java基础+核心库+图形+网络+高级特性》详细讲解Java语言基础开发中的各种技术，第17章讲解各种媒体处理功能的开发和实现方法。本节说的是音频输入/输出原理。


输入到混频器的信号也可以来源于剪辑（Clip）。剪辑是一个包含一段完整音频数据流的设备，或者说，剪辑就是一个缓存在内存中的完整音频数据流。在一些要求反复播放音乐片段的场合，例如游戏的背景音乐，剪辑是很有用


17.3.3  音频的数据格式
音频数据--也就是从TargetDataLine输入或从SourceDataLine输出的数据，必须符合音频格式的标准。音频数据的格式选项由AudioFormat类封装，主要选项包括：编码方式（可以是PCM（Pulse Code Modulation，脉冲编码调制）、MP3等）、通道数量、取样率、帧速率等。
根据不同的参数，AudioFormat提供了3个构造函数

17.3.4  音频的录制
创建了音频格式对象后，就可以使用该格式进行录音了。音频的录制需要经过以下的6步。
（1）取得输入设备信息。
创建了音频数据格式对象后，就可以根据该对象取得输入设备信息DataLine.Info：
（2）取得输入设备。
根据该设备信息，使用AudioSystem的getLine()方法取得输入设备对象：
（3）打开输入设备。
按照指定的音频格式打开该设备targetDataLine：
（4）开始录音。
启动该设备，即可开始录音：
（5）读取录音数据。
可以循环调用该录音设备的读取函数读取录音数据到tempBuffer数组中：
（6）保存录音数据。
每一次读取的数据都会临时保存在数据tempBuffer中，然后可以将数组加入到一个缓存数组byteArrayOutputStream中保存起来：
以上的循环读取过程需要使用一个while(true)循环，表示不停的录音，整合后的过程如下所示：
这样，每一次读取的录音数据就会保存在byteArrayOutputStream对象中了，供后期的播放和保存使用。
17.3.5  音频的播放
以上的录音数据保存在byteArrayOutputStream缓存对象中，接下来就可以播放该对象中的数据了。与录制的过程相对应，播放的过程需要如下的6步。
（1）取得输出设备信息。
使用录音时相同的音频格式取得输出设备信息DataLine.Info：
（2）取得输出设备。
根据输出设备信息取得输出设备对象SourceDataLine：
（3）打开输出设备。
按照指定的音频格式打开该设备：
（4）开始播放。
启动该设备，即可开始播放录音：
（5）取得录音数据。
从录音数据缓存byteArrayOutputStream中取得录音数据，并转换成输入流audioInputStream：
（6）播放录音数据。
循环读取audioInputStream输入源中的音频数据，对于读取到的数据tempBuffer，直接写入sourceDataLine对象即可播出声音了。循环结构的过程如下所示：
17.3.6 音频的保存

ref
17.3.1 JavaSound体系结构 - 51CTO.COM.html



第1课  Java快速上手 3
第2课  JVM内存结构及其调优 31
第3课  在Eclipse下开发Java程序 49
第4课  在Linux下开发Java程序 91
第5课  Java核心语法详解 157
第6课  Java面向对象编程 201
第7课  Java面向对象编程扩展 225
第8课  Java编码规范与样式 249
第9课  Java输入/输出流 267
第10课  Java多线程编程 335
第11课  Java常用实体类 373
第12课  Java常用集合类 407
第13课  Java正则表达式 437
第14课  XML与属性文件 459
第15课  Java GUI库对比 485
第16课  AWT图形界面开发 499
第17课  AWT多媒体编程 535
第18课  Swing图形界面开发 577
第19课  SWT图形界面开发 607
第20课  SWT增强组件库JFace 643
第21课  Applet组件编程 661
第22课  Java网络编程 681
第23课  NIO非阻塞编程 741
第24课  RMI分布式网络编程 801
第25课  CORBA分布式网络编程 821
第26课  Java反射编程与动态代理 845
第27课  Java泛型编程 871
第28课  Java注释符编程 881
第29课  Java 5.0语言新特性 891



