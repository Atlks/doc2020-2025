Ide组成部分


编辑器 代码高亮  函数补全等他
Monaco与ACE、CodeMirror功能点的对比


Monaco Editor 可以看作是一个编辑器控件，只提供了基础的编辑器与语言相关的接口，可以被用于任何基于 Web 技术构建的项目中。

Monaco Editor 之所以广为人知是因为他被用在了VS Code中。

十 jarkas 大鱼 刘洋 汤姆, [13/09/2023 10:53 am]
语言支持
Monaco 本身只是一个文本编辑器，对于不同编程语言的基础支持、则需要通过注册语言规则的方式来实现，Monaco 默认使用了 Monarch （而 VS Code 使用的则是 Textmate），Monarch 规定了语言需要包含的关键字、类型、操作符，以及 Tokenizer。Tokenizer 是一组正则表达式，表示以何种规则来识别这些关键字以及括号、注释块，Monarch 将会依照正则表达式的配置来匹配每个 Token，并为之渲染对应的主题色。

作者：AkA月良神
链接：https://juejin.cn/post/7146457023415058468
来源：稀土掘金
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。

十 jarkas 大鱼 刘洋 汤姆, [13/09/2023 10:53 am]
打造自己的编辑器

十 jarkas 大鱼 刘洋 汤姆, [13/09/2023 10:54 am]
ide 技术  编辑器技术  对于高级的语言特性支持，Monaco 也提供了遵循 LSP 标准的 API，例如自动补全、鼠标悬停、查找引用、定义跳转等常见功能都可以通过注册语言服务器来实现，而 Monaco 本身自带了包括 TypeScirpt/JavaScript、CSS、HTML 的语言服务支持

作者：AkA月良神
链接：https://juejin.cn/post/7146457023415058468
来源：稀土掘金
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。

十 jarkas 大鱼 刘洋 汤姆, [13/09/2023 10:55 am]
一个简单的代码补全
主要是通过registerCompletionItemProvider 函数实现一个简单的json自定义代码提示补全功能。


十 jarkas 大鱼 刘洋 汤姆, [13/09/2023 10:55 am]
测试协议dbgp

十 jarkas 大鱼 刘洋 汤姆, [13/09/2023 10:55 am]
anguage Server Protocol （语言服务器协议，简称 LSP）是微软于 2016 年提出的一套统一的通讯协议方案。该方案定义了一套编辑器或 IDE 与语言服务器之间使用的协议，该语言服务器提供自动完成、转到定义、查找所有引用等语言功能。

十 jarkas 大鱼 刘洋 汤姆, [13/09/2023 10:56 am]
语言服务器（Language Server）不是很了解。举个例子，我们在使用在线编程工具的时候，是不是也有代码提示、代码错误诊断等功能？其实背后是跑着一个对应这门语言的 language server 进程实例（也有开发者工具本身和 Language Server 耦合在一起的，比如 Eclipse），这个 Language Server 实例负责分析你当前打开的代码文件

作者：字节架构前端
链接：https://juejin.cn/post/7051453384645148680
来源：稀土掘金
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。

十 jarkas 大鱼 刘洋 汤姆, [13/09/2023 10:56 am]
软提出 LSP 的目的是，之前各个编辑器（VSCode, Vim, Atom, Sublime...）各自为战，编辑器内部实现的特性和协议都不同。每换一个编辑器，就有可能要给该编辑器中支持的每门语言写一个对应的 Language Server，也就是说假设有 n 门语言，m 个编辑器，那全部编辑器适配所有语言的开发成本和复杂度为 n * m。

作者：字节架构前端
链接：https://juejin.cn/post/7051453384645148680
来源：稀土掘金
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。

十 jarkas 大鱼 刘洋 汤姆, [13/09/2023 10:57 am]
每个编辑器（客户端）都在用户产生某些通用的行为时（比如点击跳转到定义）负责生成标准中的行为事件，然后以 JSON-RPC 的形式去调用 Language Server 的接口方法。Language Server 相对应地，也必须实现全部 LSP 规范（或者至少实现其中关键部分）定义的接口

作者：字节架构前端
链接：https://juejin.cn/post/7051453384645148680
来源：稀土掘金
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。

十 jarkas 大鱼 刘洋 汤姆, [13/09/2023 10:57 am]
做的好处在于，对于某门编程语言，一个编辑器工具不需要再去关心怎么去做代码分析，而是只需要关注如何在界面上发起或响应 LSP 规定的 RPC 事件。而在语言服务器这边也是同理，只需要关注协议本身的事件并响应 & 发起事件即可

十 jarkas 大鱼 刘洋 汤姆, [13/09/2023 10:57 am]
另外，由于编辑器和 Language Server 是两个进程，所以如果 Language Server 挂了，编辑器进程本身也还会存在，用户不用担心还没修改好的代码因此丢失的问题

十 jarkas 大鱼 刘洋 汤姆, [13/09/2023 11:00 am]
代码诊断是怎么实现的？
一般是通过建立抽象语法树，做语法分析检查语法错误。

一些插件或者代码诊断工具，如 ESLint，可以在语法规范的 AST 中的节点中遍历访问，找出更多的 Lint 警告/错误

十 jarkas 大鱼 刘洋 汤姆, [13/09/2023 11:01 am]
供不同的 API 来实现相同的功能。
语言服务器旨在提供特定语言的功能，并通过支持进程间通信的协议与开发工具进行通信。
语言服务协议（LSP）背后的想法是对此类服务器和开发工具如何通信的协议进行标准化。这样，单个语言服务器可以在多个开发工具中重复使用，从而可以以最小的努力支持多种语言。
LSP 是语言开发者和工具开发者的双赢！

十 jarkas 大鱼 刘洋 汤姆, [13/09/2023 11:05 am]
术细节，但我绝对佩服他们在这个特定领域的战略眼光，他们：

建立了一个基于 web 技术的编辑器
将 webdev 确定为一个巨大的利基市场（niche，意为小众市场），JetBrains 在这个市场上挣扎（在一个 IDE 中支持 JS 几乎是不可能的）

十 jarkas 大鱼 刘洋 汤姆, [13/09/2023 11:08 am]
语言服务器协议 (LSP) 是 Microsoft 开发的一项开放标准协议，用于开发工具与语言服务器之间的通信。 我们将 LSP 整合到 IntelliJ 平台，使插件开发者能够使用特定 LSP 服务器集成引入自定义语言支持。 语言服务器可以提供针对特定语言的功能，例如代码补全、文档和格式设置，这比从头开始实现语言支持要容易得多，省时省力。 它还减少了持续维护和跟踪相关语言与工具更改的需要，使不同开发环境更易获得一致的语言支

十 jarkas 大鱼 刘洋 汤姆, [13/09/2023 11:13 am]
对标优势
monaco有一个专门的库Monarch定义语法高亮，包括language(语言定义)，token(语法标记)，state(状态机)，rules(输入规则)等语言解析的模块，其中可以通过json文件直接定义语言

集成vscode的编辑功能，使用较为简单
使用vscode的外观和交互较为友好
原生支持代码diff，typescript
Monaco与ACE、CodeMirror功能点的对比

十 jarkas 大鱼 刘洋 汤姆, [13/09/2023 11:14 am]
基本完备，

CodeMirror适合支持扩展性要求高的定制型编辑器，但其多文件的引入方式带来一定的管理不方便以及浏览器端的网络性能影响。
Ace综合能力突出，适应现代的前端开发能力，基本上手简单，扩展也较为丰富，适合在浏览器端的网页中嵌入。
monaco集成度最高，引入文件量巨大，引入方式兼容性不太好，但功能实现完备，不需另外的扩展引入，适合需要实现复杂功能但不进行深度扩展的应用，因其不支持mobile且文件量大，在electron这类的客户端环境使用较为合适。




LSP 语言服务器协议  ast解析
什么是语言服务器协议？
在编辑器或 IDE 中为编程语言支持丰富的编辑功能（如源代码自动补全或 转到定义 ）在传统上非常具有挑战性且非常耗时。 通常，它需要使用编辑器或 IDE 的编程语言 (扫描程序、分析程序、类型检查器、生成器等) 编写域模型。 

Dbgp 调试器协议
通过 DBGp 可以支持调试功能，DGBp 是一种常见的支持多语言和调试器 UI 通信的调试器协议
