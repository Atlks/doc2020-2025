字符编码


0x02 字符编码
由于历史原因，在早期字符集其实和字符编码是同义的，因为字符集的编码就是对应字符实际储存的值，直到 Unicode 的出现，因为 Unicode 有好几种不同的字符编码，比如：UTF-8、UFF-16、UTF-32。然后字符编码的概念就出来了，字符编码是字符集和实际存储数值之间的转换关系，也就是说字符编码是定义在字符集上的映射规则。然后我就开始有点头晕了/(ㄒoㄒ)/~~，字符编码 UTF-8 和字符集 Unicode 到底是什么关系？
实际上我们可以说UTF-8 是 Unicode 的一种实现方式。
我们可以查到在 Unicode 码表中，「国」字对应的十六进制编码是 0x56FD 但是如果我们新建一个文本文件，输入一个「国」字并用 UTF-8 的字符编码储存，然后以十六进制的方式查看该文件，我们会发现储存的并不是 0x56FD 而是 0xE59BBD。因为字符集的编码通过某种规则转换为了实际存储的数据，这里的某种规则即是字符编码。下面一图可以看出字符集和字符编码的不同。
0x03 多字节字符串
PHP 在处理非英文的字符串时，部分字符串相关的函数可能会经常出现问题，因为 PHP 中处理字符串的函数默认假设所有字符都是 8 位字符，占用一个字节。而中文至少要用两个或三个字节储存（使用 UTF-8 编码），所以经常会出错。比如 strlen 函数在测试中文字符串时得到的是字节长度而不字符长度，所以我们应该利用 mbstring 拓展 提供的多字节字符串函数进行处理。

