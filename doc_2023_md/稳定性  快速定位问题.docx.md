稳定性  快速定位问题


Prgrlm spt dbg stp dbg
Rmt dbg
即使反馈模式
Console 
Bot api 及时反馈到bot msg里面去

Rest 接口打印详细堆栈
Design 方便快速实现问题
Lib增强e的上下文(行号，fun名称，出入参数，
执行到此处的所有变量名称和val
Callfun拦截器
基于ex的反馈模式，包括rest接口

Api 日志   监控 业务日志全面dump 
单元测试console测试 不用启动web
Console同步输出
请求日志单独日志
Err单独日志
可以式样aop增强日志api
进入每个fun need记录出入参数和retval
Linenum问题，可以自己magic num 方便搜索

ERr ex问题
打印详细stgatck
序列化ex ，记得有些ex不能序列化自己实现序列化
进入fun的参数和方法名 上下文要实现
Err 增强转换为bizerr 常见的参数缺失错误


打印详细堆栈

Pipe组合函数模式，隔离问题区域

fn这个管道拆分成f1，f2，f3三个管道，每个管道各司其职。在排查问题的时候，定位速度就快很多了。并且，在数据处理的过程中，我们只在乎最终结果，所以中间结果都是不需要关注的。

每个fn里面有日志自动化方便记录问题

分解小函数，里面自带日志，方便分析


Prblm 常见问题库和解决方案集合
重复问题，，，uniq索引+ex
数据缺失，式样form chk lib解决
比如说接口请求没返回预期的数据，也没抛异常，这时大概率是请求参数问题。

Tool
分布式部署时，ELK系统和全链路追踪工具

Ajax Interceptor。 拦截替换结果方便测试


上面我们提到，本地没问题，线上有问题，一部分原因就是因为后端数据有问题，这里先祭出一个小型必杀技：Ajax Interceptor。
它是一个谷歌插件，可以拦截页面上的 Ajax 请求，并把返回结果替换成任意文本。这对 mock 数据、排查线上问题 来说简直就是神器！！！

抓包工具
    比如说接口请求没返回预期的数据，也没抛异常，这时大概率是请求参数问题。对于HTML网页，我们在浏览器打开网络审查面板，即可查看请求数据。
    而对于客户端或小程序，服务端如果没有日志记录，需要加日志代码，然后上线后才能确认数据问题。
    这时可以使用抓包工具，捕捉网络请求查看HTTP请求参数，比如用 Charles，抓包的HTTP请求内容查看如下图


 难找问题的情况归类下
1、报错信息很少，只知道哪个接口，甚至不知道具体发生时间点；
2、没拿到出问题的账号权限，其他账号不能复现

3、重试操作却很难复现问题，怀疑是并发操作的问题；
4、没有日志记录，需要加日志代码，然后上线后才能确认数据问题；
5、线上某个接口请求慢，调用了很多服务，不确定具体慢的环节。
    解决问题的步骤是：复现问题、定位问题、修复问题，今天主要聊聊发现和定位问题，下面一一介绍好用的工具。


