Hi teck  元编程 面向数据编程



常见的编程范型有：函数式编程、指令式编程、过程式编程、面向对象编程等等。

元编程（Metaprogramming）核心思想操作DSL
元编程描述成一种计算机程序可以将代码看待成数据的能力
、是指某类计算机程序的编写，这类计算机程序编写或者操纵其他程序（或者自身）作为它们的数据，或者在运行时完成部分本应在编译时完成的工作。 很多情况下与手工编写全部代码相比工作效率更高。 编写元程序的语言称之为元语言，被操作的语言称之为目标语言。


如果能够将代码看做数据，那么代码就可以像数据一样在运行时被修改、更新和替换；元编程赋予了编程语言更加强大的表达能力，能够让我们将一些计算过程从运行时挪到编译时、通过编译期间的展开生成代码或者允许程序在运行时改变自身的行为。

元编程思想  代码写dsl代码不是



程序必须易于修改。。面相数据帮衬，，表映射


数据和逻辑福利，不要oo结合一起

最常见的元编程工具是编译器，它可以将程序员使用高级语言编写的相对短小的程序转换为等价的汇编语言或者机器语言程序。这是最基础的编程工具，在大多数情况下，直接编写机器语言程序是不太现实的。

十 jarkas 大鱼 刘洋 汤姆, [06/09/2023 10:06 am]
在程序中嵌入直接处理程序数据的解释器即可实现这一目的。现在已经有一些用于常用高级语言的实现，例如

申明试编程 vs 指令时编程

产生式编程 
面向语言的程序设计（Language-Oriented Programming，LOP）
不再用通用编程语言解决问题，程序员首先为问题编写一种或多种领域特定语言，然后再在这些语言中解决问题。这个概念具体描述于Martin Ward的1994年的题为《面向语言编程》的论文中。
如何实施元编程
内嵌 dsl解析器
反射是促进元编程的一种很有价值的语言特性

十 jarkas 大鱼 刘洋 汤姆, [06/09/2023 10:04 am]
反射是促进元编程的一种很有价值的语言特性。把编程语言自身作为一级数据类型（如LISP、Forth或Rebol）也很有用。支持泛型编程的语言也使用元编程能力。

十 jarkas 大鱼 刘洋 汤姆, [06/09/2023 10:05 am]
元编程通常通过两种方式实现。一种是通过应用程序编程接口（APIs）将运行时引擎的内部信息暴露于编程代码 反射。另一种是动态执行包含编程命令的字符串表达式。eval因此，“程序能够编写程序”。虽然两种方式都能用于同一种语言，但大多数语言趋向于偏向其中一种

十 jarkas 大鱼 刘洋 汤姆, [06/09/2023 10:05 am]
不是所有的元编程都需要产生式编程。如果一个程序可以在运行时改变或者可以使用增量编译（如Lisp、Forth、Perl、Python、REBOL、Smalltalk、Ruby、PHP、Tcl、Lua、Groovy、Frink和JavaScript），那么就可以在不实际生成源代码的情况下使用这种技术实现元编程。


十 jarkas 大鱼 刘洋 汤姆, [06/09/2023 10:10 am]
面向语言的程序设计（Language-Oriented Programming，LOP）[1]，指一种程序设计范型，将有相同状态的块建造成对象、模块和构件[2]，不再用通用编程语言解决问题，程序员首先为问题编写一种或多种领域特定语言，然后再在这些语言中解决问题。这个概念具体描述于Martin Ward的1994

十 jarkas 大鱼 刘洋 汤姆, [06/09/2023 10:11 am]
编程范型、编程范式或程序设计法（英语：Programming paradigm），是指软件工程中的一类典型的编程风格。常见的编程范型有：函数式编程、指令式编程、过程式编程、面向对象编程等等。

编程范型提供并  申明试编程法

十 jarkas 大鱼 刘洋 汤姆, [06/09/2023 10:11 am]
面向对象编程中，程序员认为程序是一系列相互作用的对象，由于方法论的不同，面向对象编程又分为基于类编程和基于原型编程，而在函数式编程中一个程序会被看作是一个无状态的函数计算的序列。


反射机制 反射的核心价值： 让代码帮你写代码。


十 jarkas 大鱼 刘洋 汤姆, [06/09/2023 9:06 am]
反射的概念比较强的语言像java和go。因为他们都是静态语言。缺乏很多动态特性。他们是只有通过一大堆api才能反射。所以才会有比较强反射的概念。

js是一个基于原型继承的面向对象的函数语言。反射无处不在。（当一个概念无处不在的时候，那么设个概念也就渐渐地淡化了。）

js反射说个最简单的例子。

在你不知道一个对象内部结构的情况下(你甚至连这个对象的一个属性，或api都不知道)，怎么跟他通信呢？这个时候就要通过一种机制，得到它的内部结构。这种机制就叫做反射。说白了，窥探对象内部结构的方法就叫做反

十 jarkas 大鱼 刘洋 汤姆, [06/09/2023 9:07 am]
这比较时遍历window对象啊？有什么稀奇的。你仔细看看这就是在窥探 window 对象的内部结构；换句话说这就是反射。（window的方法和属性都基本都会被打印出来，除了一些情况enumerable:true的时候）。

得到了内部结构就需要调用，也就是通信

十 jarkas 大鱼 刘洋 汤姆, [06/09/2023 9:07 am]
JavaScript什么地方都是反射。
window['alert']()这放到JAVA/C#那类语言中妥妥的都是反射……

十 jarkas 大鱼 刘洋 汤姆, [06/09/2023 9:08 am]
认为反射在javascripts不太贴切，他无法像java等语言一样使用方便和全面使用，可以使用for in + call/apply的方式,如链接： http://segmentfault.com/a/1190000000593171

如果你使用过java反射再尝试js for in的反射，你会发现有些反射还是木那么方便做的。

十 jarkas 大鱼 刘洋 汤姆, [06/09/2023 9:09 am]
个人认为反射就是在不知道对象的出处时，在运行时可以获取到该对象的属性或者方法。。动态调用方法

十 jarkas 大鱼 刘洋 汤姆, [06/09/2023 9:09 am]
反射机制最通俗的理解应该是， 字符串可以当做代码来运行， 这个确保了你可以通过动态的拼装字符串产生更多行为的可执行代码。
例如这个里面 循环拼装了多个字符串并且作为可执行代码执行：

十 jarkas 大鱼 刘洋 汤姆, [06/09/2023 9:09 am]
等车的猪： 字符串当作代码来运行不就是eval么？代码写代码不是元编程思想吗


反射与动态代理
代理模式是Java中使用频率相当高的设计模式之一，尤其是在牛逼的框架中，Spring，Mybatis，Dubbo等框架中。

其中反射就是一个很好的应用。

静态代理模式我们就没有必要提他了，相当于一个业务需要代理，你就得给他搞一个代理类。全是手动搞出来的。

十 jarkas 大鱼 刘洋 汤姆, [06/09/2023 9:21 am]
反射与动态代理
代理模式是Java中使用频率相当高的设计模式之一，尤其是在牛逼的框架中，Spring，Mybatis，Dubbo等框架中。
其中反射就是一个很好的应用。
静态代理模式我们就没有必要提他了，相当于一个业务需要代理，你就得给他搞一个代理类。全是手动搞出来的。

十 jarkas 大鱼 刘洋 汤姆, [06/09/2023 9:22 am]
“啊，这只是一些投机取巧地 trick ，这种把戏不足以震撼我。”你不妨深入研究充斥着 Reflection 的 Ruby on Rails 的源码——这也是 Ruby 界公认的用元编程（Metaprogramming）提高生产力的最佳实践。但我现在要打住对

十 jarkas 大鱼 刘洋 汤姆, [06/09/2023 9:22 am]
反射其实就是一个编程的一种实现原编程的实现就是长大程度上用的就是反射..eval..以及潜入dsl

十 jarkas 大鱼 刘洋 汤姆, [06/09/2023 9:23 am]
再比如说自动序列化。给一个对象，把他保存成文件。没有反射你只能为每个对象手工写load和store函数。有了反射之后你可以一口气写一个Serialize<T>(T obj)然后遍历每个成员，看看有没有被标记为[序列化], 然后递归地去序列化该成员即可，多么方便。

作者：Yong He
链接：https://www.zhihu.com/question/28570203/answer/41407802
来源：知乎
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。

十 jarkas 大鱼 刘洋 汤姆, [06/09/2023 9:24 am]
再比如，你要实现一个 JSON parser，这个 parser 有两个方法，如果是序列化，那也就是把一个对象转换成一个字符串，这和刚才的打印一样，如果有反射，可以一个函数解决问题，如果没有反射，那你很可能要为每一种类型写好它的序列化函数，或者让被序列化的对象实现一个 Serialize 方法, 如果没实现就不能序列化, 这显然增加了代码的负担

十 jarkas 大鱼 刘洋 汤姆, [06/09/2023 9:26 am]
ioc 场景。。动态代理aop

十 jarkas 大鱼 刘洋 汤姆, [06/09/2023 9:28 am]
##Y6stdWraG##PAGE

十 jarkas 大鱼 刘洋 汤姆, [06/09/2023 9:28 am]
##Y6stdWraG##PAGE

十 jarkas 大鱼 刘洋 汤姆, [06/09/2023 9:29 am]
反正反射一个用途就是开发IDe，当你输入内名点号的时候，就会自动列出它的属性方法名。

十 jarkas 大鱼 刘洋 汤姆, [06/09/2023 9:30 am]
另外一个反正右图就是开发各种通用框架为了保持通用性所以所以需要从同配置文件下载各种实体化的类实例化的利益这就是反射的另外一个用途，开发框架。

十 jarkas 大鱼 刘洋 汤姆, [06/09/2023 9:30 am]
反正还用来实现ap，ap的话就是动态代理可以增加权限，日志错误处理等等，增强症状性。健壮性

十 jarkas 大鱼 刘洋 汤姆, [06/09/2023 9:31 am]
反射的应用场景
反射是框架设计的灵魂。

在我们平时的项目开发过程中，基本上很少会直接使用到反射机制，但这不能说明反射机制没有用，实际上有很多设计、开发都与反射机制有关，例如模块化的开发，通过反射去调用对应的字节码；动态代理设计模式也采用了反射机制，还

十 jarkas 大鱼 刘洋 汤姆, [06/09/2023 9:33 am]
##Y6stdWraG##PAGE

十 jarkas 大鱼 刘洋 汤姆, [06/09/2023 9:34 am]
序运行时，允许改变程序结构或变量类型，这种语言称为动态语言。我们认为 Java 并不是动态语言，但是它却又一个非常突出的动态相关的机制，俗称：反射。
Reflection 是Java 程序开发语言的特征之一，它允许运行中的 Java 程序获取自身的信息，并且

十 jarkas 大鱼 刘洋 汤姆, [06/09/2023 9:34 am]
增加程序的灵活性，避免将程序写死到代码里。

例：定义了一个接口，实现这个接口的类有20个，程序里用到了这个实现类的地方有好多地方，如果不使用配置文件手写的话，代码的改动量很大，因为每个地方都要改而且不容易定位，如果你在编写之前先将接口与实现类的写在配置文件里，

十 jarkas 大鱼 刘洋 汤姆, [06/09/2023 9:35 am]
2.代码简洁，提高代码的复用率，外部调用方便

十 jarkas 大鱼 刘洋 汤姆, [06/09/2023 9:39 am]
动态语言可能包含的特征有：eval函数、对象运行时间改变、反射和宏。

十 jarkas 大鱼 刘洋 汤姆, [06/09/2023 9:40 am]
使用编译器编译也可以实现动态功能，Maven编译 eval效果咯。。

十 jarkas 大鱼 刘洋 汤姆, [06/09/2023 9:41 am]
Eval
编辑
一些动态语言提供eval函数。这个函数接受包含这个语言写的代码的一个字符串形式参数并执行它。如果这个代码表示了一个表达式，则返回它的结果值。Erik Meijer和Peter Drayton声称可以：“使用eval作为高阶函数的穷人替代品”[1]。


Eval函数
泛型编程的语言也使用元编程能力。
Python的元编程工具包括装饰器，元类，以及函数和类的各种动态修改技术

元编程通常通过两种方式实现。
一种是通过应用程序编程接口（APIs）
将运行时引擎的内部信息暴露于编程代码。另一种是
动态执行包含编程命令的字符串表达式。
因此，“程序能够编写程序”。虽然两种方式都能用于同一种语言，但大多数语言趋向于偏向其中一种。


，从总体来看，根据『生成代码』的时机不同，我们将
元编程能力分为两种类型， 编译期间的元编程  运行期间的元编程
宏和模板
其中一种是编译期间的元编程，例如：宏和模板；另一种是运行期间的元编程，也就是运行时，它赋予了编程语言在运行期间修改行为的能力，当然也有一些特性既可以在编译期实现，也可以在运行期间实现。

宏和运行时
另外两种元编程能力：宏和运行时，前者是在编译期间完成的，而后者是在代码运行期间才发生的。

宏（Macro）宏是很多编程语言具有的特性之一
，它是一个将输入的字符串映射成其他字符串的过程，这个映射的过程也被我们称作宏展开
我们在这里会介绍两种不同的宏，一种是基于文本替换的宏，另一种是基于语法的宏
C++ 等语言使用基于文本替换的宏，而类似于 Elixir、Rust 等语言的宏系统其实都是基于语法树和语法元素的，它的实现会比前者复杂很多，应用也更加广泛。
这些宏的定义就是一个简单的标识符，它们会在预编译的阶段被预编译器替换成定义后半部分出现的字符，这种宏定义其实比较类似于变量的声明，我们经常会使用这种宏定义替代一些无意义的数字，能够让程序变得更容易理解。

宏定义类似常量

内嵌dsl解析器
通过cli调用其他dsl
H5  sql解析器 rex正则表达式
Lodash表达式
Spel 各种el
Tool

最常见的元编程工具是编译器，它可以将程序员使用高级语言编写的相对短小的程序转换为等价的汇编语言或者机器语言程序。这是最基础的编程工具，在大多数情况下，直接编写机器语言程序是不太现实的。

另一个很常用的元编程例子是lex和yacc，这两个工具用来生成词法分析器和语法分析器。Yacc通常用作编译器的编译器，生成能够将高级语言转换为机器语言的工具。
