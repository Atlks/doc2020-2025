Atitit mysql最大连接数和连接池参数调整


连接数1024可以了，每个连接都要内存占用 所以不能过高上万

三羊开泰, [30.12.20 20:07]
问题是 数据库连接过多？

大 鱼, [30.12.20 20:07]
现在数据库连接多少啊？？数据库配置和  连接池配置？

三羊开泰, [30.12.20 20:09]
并发配置？

三羊开泰, [30.12.20 20:11]
tomcat的？

大 鱼, [30.12.20 20:14]
数据库 show global variables like '%conn%';

三羊开泰, [30.12.20 20:14]
[ Photo ]

大 鱼, [30.12.20 20:16]
还有   applicaton.properies文件里面对druid数据库连接池连接数  最大  #最大允许的连接数
ds.maxActive=100

三羊开泰, [30.12.20 20:17]
mhysql这里奇怪

三羊开泰, [30.12.20 20:17]
show global variables like '%conn%'; 查询max_connections 最大连接是10240

三羊开泰, [30.12.20 20:17]
[ Photo ]

三羊开泰, [30.12.20 20:17]
但是配置里面是3000

大 鱼, [30.12.20 20:17]
那个对的啊哈哈不用管它咯

大 鱼, [30.12.20 20:18]
我本机4核cpu，测试用了百万协程，，调用连接池 貌似最大也就是 三百多的连接  就够可以复用了

三羊开泰, [30.12.20 20:18]
[ Photo ]

大 鱼, [30.12.20 20:19]
貌似100太少啊，

三羊开泰, [30.12.20 20:19]
意思是只能连接100？

大 鱼, [30.12.20 20:20]
是啊100太少，要不调到一千吧。多了可能用不到，但不会有啥不利影响

三羊开泰, [30.12.20 20:21]
这里的连接池 是做什么用的

大 鱼, [30.12.20 20:21]
复用数据库连接用的，减少每次连接响应时间和 cpu

三羊开泰, [30.12.20 20:22]
确定这个加大没问题

大 鱼, [30.12.20 20:23]
没问题多了只是用不到。。我本地测试就是一千的。。

大 鱼, [30.12.20 20:23]
还有个参数也与连接响应速度有关。。这个

大 鱼, [30.12.20 20:23]
thread_cache_size
线程池缓存大小
( 当客户端断开连接后 将当前线程缓存起来 当在接到新的连接请求时快速响应 无需创建新的线程 )

查看 thread_cache_size
show global variables like 'thread_cache_size';

作者：mashen
链接：https://www.jianshu.com/p/47adb747652d
来源：简书
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。


